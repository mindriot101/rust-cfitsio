{"version":1,"ops":[{"type":3,"author":{"id":"b83e8b4dfca7ebd9aba65d02ac0e5e24f95b7802"},"timestamp":1586539797,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYxMjEzNDEzNQ==","github-url":"https://github.com/mindriot101/rust-fitsio/issues/118#issuecomment-612134135"},"message":"Hi thanks for this report, I'll be the first to admit the crate is not well\ntested on windows.\n\nI think you're right with your suggestion. I'll take a look but if you're\nup for it feel free to give a PR a go.\n\nThanks\n\nOn Fri, 10 Apr 2020, 17:05 Filip Szczerek, \u003cnotifications@github.com\u003e wrote:\n\n\u003e Hello,\n\u003e\n\u003e Many thanks for providing this crate!\n\u003e Works fine under Linux (Fedora x86-64), but it fails when trying to use as\n\u003e a dependency (v. 0.15.0) under MSW 64-bit (MSYS2/MinGW, rustc 1.42.0,\n\u003e cfitsio 3.450-1):\n\u003e\n\u003e    Compiling fitsio v0.15.0\n\u003e error[E0308]: mismatched types\n\u003e   --\u003e C:\\Users\\...\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\fitsio-0.15.0\\src\\headers.rs:45:25\n\u003e    |\n\u003e 45 |                         \u0026mut value,\n\u003e    |                         ^^^^^^^^^^ expected `i32`, found `i64`\n\u003e ...\n\u003e 59 | reads_key_impl!(i64, fits_read_key_lng);\n\u003e    | ---------------------------------------- in this macro invocation\n\u003e    |\n\u003e    = note:    expected raw pointer `*mut i32`\n\u003e            found mutable reference `\u0026mut i64`\n\u003e\n\u003e error[E0308]: mismatched types\n\u003e    --\u003e C:\\Users\\...\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\fitsio-0.15.0\\src\\tables.rs:86:37\n\u003e     |\n\u003e 86  |                             0 =\u003e Ok(out),\n\u003e     |                                     ^^^ expected `i64`, found `i32`\n\u003e ...\n\u003e 155 | reads_col_impl!(i64, fits_read_col_lng, 0);\n\u003e     | ------------------------------------------- in this macro invocation\n\u003e     |\n\u003e     = note: expected struct `std::vec::Vec\u003ci64\u003e`\n\u003e                found struct `std::vec::Vec\u003ci32\u003e`\n\u003e\n\u003e error[E0308]: mismatched types\n\u003e    --\u003e C:\\Users\\...\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\fitsio-0.15.0\\src\\tables.rs:86:37\n\u003e     |\n\u003e 86  |                             0 =\u003e Ok(out),\n\u003e     |                                     ^^^ expected `u64`, found `u32`\n\u003e ...\n\u003e 159 | reads_col_impl!(u64, fits_read_col_ulng, 0);\n\u003e     | -------------------------------------------- in this macro invocation\n\u003e     |\n\u003e     = note: expected struct `std::vec::Vec\u003cu64\u003e`\n\u003e                found struct `std::vec::Vec\u003cu32\u003e`\n\u003e\n\u003e error[E0308]: mismatched types\n\u003e    --\u003e C:\\Users\\...\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\fitsio-0.15.0\\src\\tables.rs:140:25\n\u003e     |\n\u003e 105 |             fn read_cell_value\u003cT\u003e(fits_file: \u0026mut FitsFile, name: T, idx: usize) -\u003e Result\u003cSelf\u003e\n\u003e     |                                                                                     ------------ expected `std::result::Result\u003ci64, errors::Error\u003e` because of return type\n\u003e ...\n\u003e 140 |                         check_status(status).map(|_| out)\n\u003e     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `i64`, found `i32`\n\u003e ...\n\u003e 155 | reads_col_impl!(i64, fits_read_col_lng, 0);\n\u003e     | ------------------------------------------- in this macro invocation\n\u003e     |\n\u003e     = note: expected enum `std::result::Result\u003ci64, _\u003e`\n\u003e                found enum `std::result::Result\u003ci32, _\u003e`\n\u003e\n\u003e error[E0308]: mismatched types\n\u003e    --\u003e C:\\Users\\...\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\fitsio-0.15.0\\src\\tables.rs:140:25\n\u003e     |\n\u003e 105 |             fn read_cell_value\u003cT\u003e(fits_file: \u0026mut FitsFile, name: T, idx: usize) -\u003e Result\u003cSelf\u003e\n\u003e     |                                                                                     ------------ expected `std::result::Result\u003cu64, errors::Error\u003e` because of return type\n\u003e ...\n\u003e 140 |                         check_status(status).map(|_| out)\n\u003e     |                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `u64`, found `u32`\n\u003e ...\n\u003e 159 | reads_col_impl!(u64, fits_read_col_ulng, 0);\n\u003e     | -------------------------------------------- in this macro invocation\n\u003e     |\n\u003e     = note: expected enum `std::result::Result\u003cu64, _\u003e`\n\u003e                found enum `std::result::Result\u003cu32, _\u003e`\n\u003e\n\u003e error: aborting due to 5 previous errors\n\u003e\n\u003e It seems to be an issue with long being 32-bit under MSW 64-bit.\n\u003e\n\u003e â€”\n\u003e You are receiving this because you are subscribed to this thread.\n\u003e Reply to this email directly, view it on GitHub\n\u003e \u003chttps://github.com/mindriot101/rust-fitsio/issues/118\u003e, or unsubscribe\n\u003e \u003chttps://github.com/notifications/unsubscribe-auth/AAAOS3DMIMKUZJ2QZUROFTTRL47VVANCNFSM4MFRIU3A\u003e\n\u003e .\n\u003e","files":null}]}
{"version":1,"ops":[{"type":2,"author":{"id":"315c3ab8fc72a2a896a707725a03ec4b07547935"},"timestamp":1553880959,"metadata":{"github-id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MjIzOTk2NjEyNA=="},"title":"trait `fitsio::images::ReadImage` is not implemented for `ndarray...`","was":"trait `fitsio::images::ReadImage` is not implemented for `ndarray...`"},{"type":3,"author":{"id":"b83e8b4dfca7ebd9aba65d02ac0e5e24f95b7802"},"timestamp":1553889746,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3ODEzMTc1Mg==","github-url":"https://github.com/mindriot101/rust-fitsio/issues/102#issuecomment-478131752"},"message":"Hi, thanks for the interest in my fits library and rust.\n\nI'm not at my computer right now, but can I ask if you're saying the\n`array` feature to your cargo.toml?\n\nE.g. see this:\nhttps://github.com/mindriot101/rust-fitsio/blob/master/homepage/fitsioexample/Cargo.toml\n\nThanks\n\nOn Fri, 29 Mar 2019, 17:35 Lukas Winkler, \u003cnotifications@github.com\u003e wrote:\n\n\u003e Hi,\n\u003e\n\u003e Sorry, if I am making an obvious mistake as I am a total rust beginner.\n\u003e\n\u003e Everything seems to be working fine until I want to create an ndarray from\n\u003e the image in the FITS file.\n\u003e\n\u003e No matter how I write it, I always get an\n\u003e\n\u003e the trait bound ndarray::ArrayBase\u003cndarray::OwnedRepr\u003cu32\u003e,\n\u003e ndarray::dimension::dim::Dim\u003cndarray::dimension::dynindeximpl::IxDynImpl\u003e\u003e:\n\u003e fitsio::images::ReadImage is not satisfied\n\u003e\n\u003e error.\n\u003e\n\u003e I think this is not just caused by my code as I can reproduce it by trying\n\u003e to compile the example code in this repo:\n\u003e\n\u003e ➜  ~/tmp git clone git@github.com:mindriot101/rust-fitsio.git\n\u003e\n\u003e Klone nach 'rust-fitsio' ...\n\u003e\n\u003e remote: Enumerating objects: 121, done.\n\u003e\n\u003e remote: Counting objects: 100% (121/121), done.\n\u003e\n\u003e remote: Compressing objects: 100% (70/70), done.\n\u003e\n\u003e remote: Total 5665 (delta 65), reused 88 (delta 46), pack-reused 5544\n\u003e\n\u003e Empfange Objekte: 100% (5665/5665), 6.85 MiB | 2.05 MiB/s, Fertig.\n\u003e\n\u003e Löse Unterschiede auf: 100% (4305/4305), Fertig.\n\u003e\n\u003e ➜  ~/tmp cd rust-fitsio/homepage/fitsioexample\n\u003e\n\u003e ➜  ~/…/homepage/fitsioexample git:(master) cargo run --bin ndarray_support\n\u003e\n\u003e     Updating git repository `https://github.com/mindriot101/rust-fitsio` \u003chttps://github.com/mindriot101/rust-fitsio\u003e\n\u003e\n\u003e     Updating crates.io index\n\u003e\n\u003e    Compiling num-traits v0.2.6\n\u003e\n\u003e    Compiling matrixmultiply v0.1.15\n\u003e\n\u003e    Compiling libc v0.2.51\n\u003e\n\u003e    Compiling pkg-config v0.3.14\n\u003e\n\u003e    Compiling either v1.5.1\n\u003e\n\u003e    Compiling num-complex v0.2.1\n\u003e\n\u003e    Compiling rawpointer v0.1.0\n\u003e\n\u003e    Compiling ndarray v0.11.2\n\u003e\n\u003e    Compiling ndarray v0.12.1\n\u003e\n\u003e    Compiling itertools v0.7.11\n\u003e\n\u003e    Compiling fitsio-sys v0.3.0 (https://github.com/mindriot101/rust-fitsio#98910ee3)\n\u003e\n\u003e    Compiling num-traits v0.1.43\n\u003e\n\u003e    Compiling num-complex v0.1.43\n\u003e\n\u003e    Compiling fitsio v0.14.1 (https://github.com/mindriot101/rust-fitsio#98910ee3)\n\u003e\n\u003e    Compiling fitsioexample v0.1.0 (/home/lukas/tmp/rust-fitsio/homepage/fitsioexample)\n\u003e\n\u003e error[E0277]: the trait bound `ndarray::ArrayBase\u003cndarray::OwnedRepr\u003cf32\u003e, ndarray::Dim\u003cndarray::IxDynImpl\u003e\u003e: fitsio::images::ReadImage` is not satisfied\n\u003e\n\u003e   --\u003e src/bin/ndarray_support.rs:12:31\n\u003e\n\u003e    |\n\u003e\n\u003e 12 | let image: ArrayD\u003cf32\u003e = phdu.read_image(\u0026mut fptr)?;\n\u003e\n\u003e    |                               ^^^^^^^^^^ the trait `fitsio::images::ReadImage` is not implemented for `ndarray::ArrayBase\u003cndarray::OwnedRepr\u003cf32\u003e, ndarray::Dim\u003cndarray::IxDynImpl\u003e\u003e`\n\u003e\n\u003e\n\u003e\n\u003e error: aborting due to previous error\n\u003e\n\u003e\n\u003e\n\u003e For more information about this error, try `rustc --explain E0277`.\n\u003e\n\u003e error: Could not compile `fitsioexample`.\n\u003e\n\u003e\n\u003e\n\u003e To learn more, run the command again with --verbose.\n\u003e\n\u003e\n\u003e Maybe it isn't working because I seem to be using the latest rust version:\n\u003e\n\u003e ➜ cargo --version\n\u003e\n\u003e cargo 1.33.0 (f099fe94b 2019-02-12)\n\u003e\n\u003e ➜ rustc --version\n\u003e\n\u003e rustc 1.33.0 (2aa4c46cf 2019-02-28)\n\u003e\n\u003e\n\u003e —\n\u003e You are receiving this because you are subscribed to this thread.\n\u003e Reply to this email directly, view it on GitHub\n\u003e \u003chttps://github.com/mindriot101/rust-fitsio/issues/102\u003e, or mute the\n\u003e thread\n\u003e \u003chttps://github.com/notifications/unsubscribe-auth/AADpbLaPBkTUF_w9IhJbIicvc2gy86a0ks5vbk71gaJpZM4cS5hr\u003e\n\u003e .\n\u003e","files":null},{"type":3,"author":{"id":"315c3ab8fc72a2a896a707725a03ec4b07547935"},"timestamp":1553890015,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3ODEzMzAwMg==","github-url":"https://github.com/mindriot101/rust-fitsio/issues/102#issuecomment-478133002"},"message":"As I am also getting the when cloning this repo with the Cargo.toml you linked to (see above), I don't think this is the issue.","files":null},{"type":3,"author":{"id":"b83e8b4dfca7ebd9aba65d02ac0e5e24f95b7802"},"timestamp":1553966253,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3ODI2Njc3Ng==","github-url":"https://github.com/mindriot101/rust-fitsio/issues/102#issuecomment-478266776"},"message":"Hi @Findus23, can you try a fresh clone of branch `readimage-not-implemented-for-ndarray`:\n\n```sh\ngit clone https://github.com/mindriot101/rust-fitsio\ncd rust-fitsio\ngit checkout readimage-not-implemented-for-ndarray\ncd homepage/fitsioexample\ncargo build --bin ndarray_support\n```\n\nI've pushed a new PR (#103), and as far as I can tell the explanation for the problem is to do with trait implementations being linked to structs from different code versions i.e. structs in different versions of crates are treated as different structs.","files":null},{"type":6,"author":{"id":"b83e8b4dfca7ebd9aba65d02ac0e5e24f95b7802"},"timestamp":1553966253,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDIwMzMwOTQ3NA=="},"target":"7e36cfa84e00d1518c420649cb9af0e91dd1b5b844b493c7565e226b97ec5f93","message":"Hi @Findus23, can you try a fresh clone of branch `readimage-not-implemented-for-ndarray`:\n\n```sh\ngit clone https://github.com/mindriot101/rust-fitsio\ncd rust-fitsio\ngit checkout readimage-not-implemented-for-ndarray\ncd homepage/fitsioexample\ncargo build --bin ndarray_support\n```\n\nI've pushed a new PR (#103), and as far as I can tell the explanation for the problem is to do with trait implementations being linked to structs from different code versions i.e. structs in different versions of crates are treated as different structs.\n\nThis means the version of `ndarray` used by `fitsio` needs to be the same version of `ndarray` that is used within _your_ crate. You can see in the output you pasted above that `ndarray` is listed twice:\n\n```\n   Compiling num-traits v0.2.6\n   Compiling matrixmultiply v0.1.15\n   Compiling libc v0.2.51\n   Compiling pkg-config v0.3.14\n   Compiling either v1.5.1\n   Compiling num-complex v0.2.1\n   Compiling rawpointer v0.1.0\n   Compiling ndarray v0.11.2    \u003c--- here\n   Compiling ndarray v0.12.1    \u003c--- and here\n   Compiling itertools v0.7.11\n   Compiling fitsio-sys v0.3.0 (https://github.com/mindriot101/rust-fitsio#98910ee3)\n   Compiling num-traits v0.1.43\n   Compiling num-complex v0.1.43\n   Compiling fitsio v0.14.1 (https://github.com/mindriot101/rust-fitsio#98910ee3)\n   Compiling fitsioexample v0.1.0 (/home/lukas/tmp/rust-fitsio/homepage/fitsioexample)\n```\n\nso `ReadImage` is being implemented for `ArrayD` version 0.11.2 within `fitsio` and it does not exist for `ArrayD` version 0.12.1 in your code or the example.","files":null},{"type":3,"author":{"id":"315c3ab8fc72a2a896a707725a03ec4b07547935"},"timestamp":1554290933,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3OTQ0OTY3OA==","github-url":"https://github.com/mindriot101/rust-fitsio/issues/102#issuecomment-479449678"},"message":"Hi, \nyou are right, the new branch compiles.\n\nI just didn't pay attention and simply installed the latest `ndarray`.","files":null},{"type":3,"author":{"id":"b83e8b4dfca7ebd9aba65d02ac0e5e24f95b7802"},"timestamp":1554312136,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQ3OTU4MTk2OQ==","github-url":"https://github.com/mindriot101/rust-fitsio/issues/102#issuecomment-479581969"},"message":"That's ok, it surprised me too! Thanks for pointing this out, and help me\nimprove the crate.\n\nI'll merge the pr now\n\nOn Wed, 3 Apr 2019, 12:28 Lukas Winkler, \u003cnotifications@github.com\u003e wrote:\n\n\u003e Hi,\n\u003e you are right, the new branch compiles.\n\u003e\n\u003e I just didn't pay attention and simply installed the latest ndarray.\n\u003e\n\u003e —\n\u003e You are receiving this because you commented.\n\u003e Reply to this email directly, view it on GitHub\n\u003e \u003chttps://github.com/mindriot101/rust-fitsio/issues/102#issuecomment-479449678\u003e,\n\u003e or mute the thread\n\u003e \u003chttps://github.com/notifications/unsubscribe-auth/AADpbKT36wBQa-VgHPrMK0Cs_dQtVnMZks5vdJB2gaJpZM4cS5hr\u003e\n\u003e .\n\u003e","files":null},{"type":4,"author":{"id":"b83e8b4dfca7ebd9aba65d02ac0e5e24f95b7802"},"timestamp":1554312208,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MjI1MDU2ODQ1MA=="},"status":2}]}